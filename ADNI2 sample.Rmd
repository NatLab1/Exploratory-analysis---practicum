---
title: "ADNI2 sample"
author: "Nathalie Fadel"
date: "3/22/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(sqldf)
```

##Scan QC filter
```{r}
ad_bl <- read_csv("ADNI2_AD_SC_BL_3_22_2019_ALL.csv") %>%
  janitor::clean_names()

cn_bl <- read_csv("ADNI2_CN_SC_BL_3_22_2019.csv") %>%
  janitor::clean_names()
```

```{r}
filter(ad_bl, description == "MT1; GradWarp; N3m") %>%
  group_by(subject) %>%
  summarize(n()) %>%
  count() %>%
  knitr::kable()
#total subjects for AD group with correct image type

missing_MRI <- sqldf("SELECT subject FROM (SELECT subject FROM cn_bl WHERE modality = 'PET') WHERE subject NOT IN (SELECT subject FROM cn_bl WHERE modality = 'MRI')")

missing_MRI
#need to find which subjects in CN group *doesnt* have a MT1 MRI

```

##Descriptive statistics of sample

###Load sample dataset
```{r}
ad_sample <- read_csv("ADNI2_AD_SC_BL_3_26_2019.csv") %>%
  janitor::clean_names()

cn_sample <- read_csv("ADNI2_CN_SC_BL_3_30_2019.csv") %>%
  janitor::clean_names()
```

###Sex breakdown tables
```{r}
ad_sample %>%
  group_by(sex) %>%
  count(sex == "M", sex == "F") %>%
  knitr::kable()

ad_sample %>%
  group_by(sex) %>%
  ggplot(aes(x = sex)) +
  geom_bar(fill = "blue") +
  theme() +
  labs(x = "Gender", caption = "Gender distribution of subjects in Alzheimer's group")

cn_sample %>%
  group_by(sex) %>%
  count(sex == "M", sex == "F") %>%
  knitr::kable()

cn_sample %>%
  group_by(sex) %>%
  ggplot(aes(x = sex)) +
  geom_bar(fill = "purple") +
  theme() +
  labs(x = "Gender", caption = "Gender distribution of subjects in cognitively normal group")

```

###Age distribution by disease group
```{r}
ad_sample %>%
  group_by(age) %>%
  summarize(n()) %>%
  count()
#32-year age span
ad_sample %>%
  summarize(min(age), max(age))
#56 to 90 years old for Alzheimer's group

cn_sample %>%
  group_by(age) %>%
  summarize(n()) %>%
  count()
#30-year age span
cn_sample %>%
  summarize(min(age), max(age))
#56 to 89 years old for CN group

ad_sample %>%
  group_by(age) %>%
  ggplot(aes(x = age)) +
  geom_histogram(binwidth = 1, fill = "blue") +
  theme(axis.text.x = element_text(angle=45, hjust=1)) +
  labs(x = "Age", caption = "Age distribution of subjects in Alzheimer's group")

cn_sample %>%
  group_by(age) %>%
  ggplot(aes(x = age)) +
  geom_histogram(binwidth = 1, fill = "purple") +
  theme(axis.text.x = element_text(angle=45, hjust=1)) +
  labs(x = "Age", caption = "Age distribution of subjects in cognitively normal group")

```